# 希冀DDL小助手

## 背景

考完离散期中的阳光明媚的下午，想到一位好友**屡次**错过（或差点错过）希冀上的作业ddl后，复习不进去计组的我打算研究一个工具。
它可以获取希冀平台上的作业信息，把尚未完成的作业的信息发到邮箱里，从而有效避免我们忘记作业ddl。

## 概述

希冀DDL小助手（CGDDLHelper）是一款用于自动检查希冀平台作业提交状态，并通过电子邮件提醒用户的Python程序。它能够登录到武汉大学计算机学院专业课一体化平台，抓取作业信息，并将未完成的作业通过邮件发送给用户。

## 环境要求

- Python 3.x
- `requests`库
- `BeautifulSoup`库（来自`bs4`）
- `Pillow`库（用于处理图像）
- `smtplib`库（用于发送邮件）
- `json`库（用于配置文件处理）

## 安装依赖

确保已安装必要的库，可以使用以下命令安装：
```bash
pip install requests beautifulsoup4 Pillow
```

## 配置步骤

- 你可以不用自行创建配置文件，在没有配置文件的情况下，使用程序时会要求你输入相关信息并自动为你创建配置文件。
- 但是你需要自己完成发件人邮箱的smtp服务的开启，已提供相应的pdf教程（本程序使用qq邮箱的smtp服务）

1. **创建配置文件**
   - 在项目目录下创建一个名为 `config.json` 的文件，内容格式如下：
     ```json
     {
         "sender_email": "发件人邮箱",
         "recipient_email": "收件人邮箱",
         "sender_password": "发件人邮箱密码(指独立的 SMTP 授权码)"
     }
     ```
   - 将你的邮箱和密码替换为实际信息。
   - 注意，邮箱密码为独立的 SMTP 授权码，本程序使用了qq的smtp服务，并写了简单的开启qq的smtp服务、获取授权码的教学。当然你也可以自行修改相应的代码，并使用其他邮箱提供的服务
2. **创建凭据文件**
   - 在项目目录下创建一个名为 `credentials.json` 的文件，内容格式如下：
     ```json
     {
         "stid": "你的学号",
         "pwd": "你的密码"
     }
     ```
   - 将学号和密码替换为实际信息。

## 使用程序

1. **运行程序**
   在命令行中运行以下命令启动程序：
   ```bash
   python CGDDLHelper.py
   ```

2. **输入信息**
   - 如果没有提供学号和密码，程序会提示你输入。
   - 如果没有找到配置文件，程序会提示输入发件人邮箱、密码、收件人。

3. **验证码**
   - 程序会自动获取验证码并显示图像，用户**需手动输入验证码**。

4. **登录**
   - 程序会尝试登录学校网站，如果用户名、密码或验证码错误，会提示相应错误信息。

5. **检查作业**
   - 登录成功后，程序会检查所有课程的作业状态，并收集未完成的作业信息。

6. **发送邮件**
   - 如果有未完成的作业，程序会将作业信息格式化，并发送到指定的收件人邮箱。

7. **查看结果**
   - 程序运行完成后，终端将显示未完成的作业信息，邮件也会发送到指定的邮箱。
   - 若目前没有未完成的作业，终端也会有响应提示

## 注意事项

- 确保填写的邮箱信息和密码正确。
- 若使用QQ邮箱，请确保已开启SMTP服务。
- 确保网络连接正常，以便程序能够访问学校网站和发送邮件。
- 如遇其他问题，欢迎交流

## 欢迎大家改进的地方

由于本人技艺不精，并且非常不熟悉python，并且开始开发时计组期中考试在即，时间较为紧迫，本程序在很多地方并不够好，功能上也很可能存在漏洞。所以欢迎大家批指正，也欢迎有兴趣的朋友来帮助完善改进这个工具。
当然，如果你觉得我写的是一坨，想要设计一个更好的程序，我也分享了我在设计爬虫时的思路，你可以查看相应的pdf，这或许可以为你省去一些工作。

以下是我能想到的一些改进的地方：

### 代码可读性和健壮性

大部分都是GPT写的，无需多言......

### 使用逻辑优化

比如支持学号和密码的重新输入，验证码输错后重新获取等......

### 验证码自动识别

在开发过程中，我尝试利用了tesseract ocr去识别验证码的内容，但是效果不好，如果能破解验证码，本工具将会更加自动化......


